<!DOCTYPE html>
<html lang="es">
<head>
          <title>frommelmak - How to use Gmail <span class="caps">POP</span>/<span class="caps">SMTP</span> services from unsecure&nbsp;clients</title>
        <meta charset="utf-8" />




    <meta name="tags" content="ssl" />
    <meta name="tags" content="pop" />
    <meta name="tags" content="smtp" />
    <meta name="tags" content="gmail" />
    <meta name="tags" content="google" />

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://frommelmak.com/">frommelmak <strong>Yet another Melmacian interested in technology...</strong></a></h1>
        </header><!-- /#banner -->
        <nav id="menu"><ul>
            <li><a href="/">Home</a></li>
            <li><a href="https://frommelmak.com/pages/about.html">About</a></li>
        </ul></nav><!-- /#menu -->
<section id="content" class="body">
  <header>
    <h2 class="entry-title">
      <a href="https://frommelmak.com/how-to-use-gmail-popsmtp-services-from-unsecure-clients.html" rel="bookmark"
         title="Permalink to How to use Gmail POP/SMTP services from unsecureÂ clients">How to use Gmail <span class="caps">POP</span>/<span class="caps">SMTP</span> services from unsecure&nbsp;clients</a></h2>
 
  </header>
  <footer class="post-info">
    <time class="published" datetime="2011-05-23T22:15:55+02:00">
      Mon 23 May 2011
    </time>
    <address class="vcard author">
      By           <a class="url fn" href="https://frommelmak.com/author/frommelmak.html">frommelmak</a>
    </address>
    <div class="category">
        Category: <a href="https://frommelmak.com/category/english.html">English</a>
    </div>
    <div class="tags">
        Tags:
            <a href="https://frommelmak.com/tag/ssl.html">ssl</a>
            <a href="https://frommelmak.com/tag/pop.html">pop</a>
            <a href="https://frommelmak.com/tag/smtp.html">smtp</a>
            <a href="https://frommelmak.com/tag/gmail.html">gmail</a>
            <a href="https://frommelmak.com/tag/google.html">google</a>
    </div>
  </footer><!-- /.post-info -->
  <div class="entry-content">
    <p>Sometimes you may need to send or retrieve email notifications using <span class="caps">SMTP</span> or <span class="caps">POP</span> Gmail services, but your client does not support <span class="caps">SSL</span> connections. In such cases you can use a <span class="caps">SSL</span> proxy tunnel such as&nbsp;stunnel.</p>
<p>stunnel is available as a Debian package, and probably in other modern Linux distributions. It is also available as Win32 binary.
The installation in debian is as simple as&nbsp;type:</p>
<div class="highlight"><pre><span></span><span class="go">apt-get install stunnel</span>
</pre></div>


<p>Since stunnel relies on OpenSSL libraries, the first thing is create a x509&nbsp;cert.</p>
<div class="highlight"><pre><span></span><span class="go">cd /etc/ssl/certs</span>
<span class="go">openssl req -new -x509 -days 3650 -nodes -out stunnel.pem -keyout stunnel.pem</span>
</pre></div>


<p>Then you need to configure stunnel in order to forward all the traffic in the 110 (<span class="caps">POP</span>) and 25 (<span class="caps">SMPT</span>) to the Gmail 995 and 465 ports&nbsp;respectively.</p>
<div class="highlight"><pre><span></span><span class="go">/etc/stunnel/stunnel.conf</span>
<span class="go">[pop3s]</span>
<span class="go">accept = server_ip_address:110 </span>
<span class="go">connect = pop.gmail.com:995</span>

<span class="go">[ssmtp] </span>
<span class="go">accept = server_ip_address:25</span>
<span class="go">connect = smtp.gmail.com:465</span>
</pre></div>


<p>The server_ip_address could be the <span class="caps">LAN</span> interface <span class="caps">IP</span> address or the localhost, depending if the client program is running localy or in some other host in your <span class="caps">LAN</span>.</p>
<p>Finaly, just start de&nbsp;service:</p>
<div class="highlight"><pre><span></span><span class="go">/etc/init.d/stunnel4 start</span>
</pre></div>


<p>And test the&nbsp;service:</p>
<div class="highlight"><pre><span></span><span class="go">telnet server_ip_address 110</span>
<span class="go">Trying ...</span>
<span class="go">Connected to somehost.</span>
<span class="go">Escape character is &#39;^]&#39;.</span>
<span class="go">+OK Gpop ready for requests from xx.xx.xx.xx dewf14449283wbe.15</span>
<span class="go">USER your_user@gmail.com</span>
<span class="go">+OK send PASS</span>
<span class="go">PASS your_gmail_pass</span>
<span class="go">+OK Welcome.</span>
<span class="go">LIST</span>
<span class="go">+OK 2 messages (23782 bytes)</span>
<span class="go">1 3124</span>
<span class="go">2 2758</span>
</pre></div>


<p>If you can connect with telnet, your client can do it&nbsp;too.</p>
<p><a href="https://twitter.com/oriolrius">@oriolrius</a>, thanks for telling me about this&nbsp;tool.</p>
<p>For more info visit: <a href="http://www.stunnel.org">www.stunnel.org</a>.</p>
  </div><!-- /.entry-content -->
</section>
        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
                which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->
</body>
</html>