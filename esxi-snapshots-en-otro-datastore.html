<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8"/>

    <title>  ESXi: Snapshots en otro datastore
 | frommelmak</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content=""/>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/css/bootstrap-responsive.min.css"/>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/magnific-popup.min.css"/>
    <link rel="stylesheet" href="/theme/css/jquery.mglass.css"/>
    <link rel="stylesheet" href="/theme/css/pygment-solarized-dark.css"/>
    <link rel="stylesheet" href="/theme/css/style.css"/>

    <!-- Fonts -->
    <link href='//fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'/>
    <link href='//fonts.googleapis.com/css?family=Istok+Web' rel='stylesheet' type='text/css'/>
    <link href='//fonts.googleapis.com/css?family=Droid+Sans+Mono' rel='stylesheet' type='text/css'/>
      <link href='//fonts.googleapis.com/css?family=Expletus+Sans' rel='stylesheet' type='text/css'>


    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <!-- Feeds -->


  </head>

  <body>
    <div class="container">

      <header>
        <div class="page-header">
            <a href="" class="avatar-container">
              <div class="avatar  animate ">
                <div class="side"><img src="images/avatar.png"/></div>
                  <div class="side back"><p class="text-center">Alien Life Form</p></div>
              </div>
            </a>
          <h1><a href="">frommelmak</a> <small>Yet another Melmacian interested in technology...</small></h1>
        </div>

        <div class="navbar">
          <div class="navbar-inner">
            <a class="brand" href="" title="Yet another Melmacian interested in technology...">frommelmak</a>
            <ul class="nav">
<li ><a href="/">Home</a></li>
<li ><a href="http://wiki.frommelmak.com">Wiki</a></li>
<li ><a href="http://old.frommelmak.com">Old Blog</a></li>
                  <li ><a href="/pages/about.html">About</a></li>
            </ul>
              <form class="navbar-search pull-right" action="https://www.google.com" target="_blank">
                <input type="text" name="q" class="search-query span2" placeholder="Search"/>
                <i class="fa fa-search fa-fw"></i>
                <input type="hidden" name="cx" value="partner-pub-2082790787711438:7148578903" />
                <input type="hidden" name="ie" value="UTF-8" />
              </form>
          </div>
        </div>
      </header>

      <section>

        <div class="row">
          <div class=" span9  ">
  <h1>
    <a href="/esxi-snapshots-en-otro-datastore.html" rel="bookmark" title="Permalink to ESXi: Snapshots en otro datastore">ESXi: Snapshots en otro&nbsp;datastore</a>
  </h1>
          </div>
        </div>

        <div class="row">


          <div class=" span9 " id="content" role="main">
  

  <div>
    <p>Si al intentar hacer un snapshot de un guest nos dice que no tenemos espacio, tenemos dos opciones: La primera es añadir otro disco duro y añadirlo al datastore en el que reside la máquina, la segunda es hacer el snapshot en otro&nbsp;datastore.</p>
<p>No obstante, hay escenarios en los que la primera opción puede no ser una solución. Por ejemplo: Si el guest dispone de dos discos duros virtuales, cada uno en un datastore con tamano de bloque diferente, podría ser que pese a tener espacio, el tamaño máximo del fichero permitido en el datastore en el que reside el disco principal no permita realizar el snapshot. En este y otros casos, la solución pasa por forzar el snapshot en otro&nbsp;datastore.</p>
<p>Para ello, existe una variable que controla dónde se hacen los snapshots. Si esta variable no existe, se realizarán el el mismo folder dónde se encuentre el fichero <code>.vmx</code> que define la&nbsp;máquina.</p>
<p>Para hacer los snapshots en otro&nbsp;datastore:</p>
<ul>
<li>Paramos el&nbsp;guest.</li>
<li>Conectamos por ssh al host y editamos el `.vmx del guest a&nbsp;snapshotear.</li>
<li>Creamos un folder para los snapshots el el&nbsp;host</li>
<li>Añadimos la variable <code>workingDir=/vmfs/volumes/id-datastore/vm-snapshots</code></li>
<li>Desregistramos la máquina: <em>Remove from&nbsp;invetory</em></li>
<li>La volvemos a registrar utilizando el fichero <code>.vmx (ver captura)</code>.</li>
</ul>
<p><img alt="vmx register" src="/images/old_blog/register_vmachine.png" /></p>
<p>Tras esto, veremos que el working dir es ahora otro el folder <code>vm-snapshots</code>. Este cambio afecta también al área de <em>swap</em> de esta máquina que pasa a estar en el nuevo&nbsp;datastore.</p>
  </div>

    <h3>Related content</h3>
    <!-- TODO: Use fancier related layout, as in http://kevin.deldycke.com/2012/04/beautify-contextual-related-posts-wordpress-plugin/ -->
    <ul>
        <li><a href="/de-vmware-server-a-esxi-con-vmware-converter.html">De VMware Server a ESXi con VMware&nbsp;Converter</a></li>
        <li><a href="/crear-discos-virtuales-de-mas-de-256gb-en-vmware-esxi.html">Crear discos virtuales de más de <span class="caps">256GB</span> en VMware&nbsp;ESXi</a></li>
        <li><a href="/udev-network-device-en-ubuntu-hardy-sobre-vmware.html">udev network device en Ubuntu Hardy sobre&nbsp;VMWare</a></li>
      </ul>


          </div>

            <div class="span3">
  <div class="well">

    <p><abbr class="fa fa-calendar" title="2010-11-04T00:22:40"> Thu 04 November 2010</abbr></p>

      <p><address class="fa fa-user"> By <a href="/author/frommelmak.html" rel="author">frommelmak</a></address></p>

    <hr/>

      <p>
              <a href="/category/spanish.html" rel="tag tooltip" class="label label-info" data-placement="right" data-original-title="56 articles in this category">Spanish</a>
            <a href="/tag/vmware.html" rel="tooltip" class="label" data-placement="right" data-original-title="5 articles with this tag">vmware</a>
            <a href="/tag/virtualization.html" rel="tooltip" class="label" data-placement="right" data-original-title="2 articles with this tag">virtualization</a>
            <a href="/tag/esxi.html" rel="tooltip" class="label" data-placement="right" data-original-title="2 articles with this tag">esxi</a>
      </p>
      <hr/>

      <p>Found a typo ? Want to fix it ?</p>
      <a class="btn btn-info btn-block" href="https://github.com/frommelmak/blog/edit/master/content/posts/esxi-snapshots-en-otro-datastore.md"><i class="fa fa-random fa-white fa-fw"></i> Edit article on GitHub</a>
      <hr/>

      <ul class="pager">
        <li class="previous "><a  href="/backup-completo-de-un-guest-linux-mediante-tar.html" title="Backup completo de un guest Linux mediante tar"  rel="prev">← Older</a></li>
        <li class="next "><a  href="/couchdb-auth.html" title="Couchdb auth"  rel="next">Newer →</a></li>
      </ul>

  </div>
              
            </div>

        </div>
      </section>

    </div>

    <!-- TODO: make footer sticky -->
    <footer class="container-fluid">
      <div class="container">
        <div class="row">

            <div class="span2">
                <h5>Social</h5>
                <ul class="unstyled">
                  <li>  <a href="http://twitter.com/frommelmak">
      <i class="fa fa-twitter"></i>
    @frommelmak
  </a></li>
                </ul>
            </div>
            <div class="span2">
                <h5>Links</h5>
                <ul class="unstyled">
                  <li>  <a href="http://linkedin.com/in/marcosmartinezjimenez">
      <i class="fa fa-linkedin-square"></i>
    LinkedIn
  </a></li>
                  <li>  <a href="http://github.com/frommelmak">
      <i class="fa fa-github"></i>
    GitHub
  </a></li>
                  <li>  <a href="http://www.youtube.com/user/melmak">
      <img src="https://icons.better-idea.org/icon?url=www.youtube.com&size=16" width="16" height="16" class="icon" alt="www.youtube.com icon"/>
    Youtube
  </a></li>
                </ul>
            </div>

          <div class="span2">
            <h5>Browse content by</h5>
            <ul class="fa-ul">
                <li><a href="/categories/index.html"><i class="fa-li fa fa-tags"></i> Categories</a></li>
                <li><a href="/archives/index.html"><i class="fa-li fa fa-calendar"></i> Dates</a></li>
                <li><a href="/tags/index.html"><i class="fa-li fa fa-tag"></i> Tags</a></li>

            </ul>
          </div>

          <div class="span2 muted">
            <h5>Copyright notice</h5>
            <p>© Copyright 2005-2015 Marcos Martínez.</p>
          </div>

          <div class="span2 muted">
            <h5>Disclaimer</h5>
              <p>All opinions expressed in this site are my own personal opinions and are not endorsed by, nor do they represent the opinions of my previous, current and future employers or any of its affiliates, partners or customers.</p>
          </div>

          <div class="span2">
            <h5 class="pull-right"><a href="#" class="fa fa-arrow-up"> Back to top</a></h5>
          </div>

        </div>
      </div>

      <div class="container">
        <div class="row span12 muted text-center">
          Site generated by <a href="http://getpelican.com"> Pelican</a>.<br/>
          <a href="https://github.com/kdeldycke/plumage"> Plumage</a> theme by <a href="http://kevin.deldycke.com">Kevin Deldycke</a>.
        </div>
      </div>

    </footer>


    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/jquery.magnific-popup.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fitvids/1.1.0/jquery.fitvids.min.js"></script>
    <script src="/theme/js/jquery.mglass.js"></script>
    <script src="/theme/js/application.js"></script>

  </body>
</html>