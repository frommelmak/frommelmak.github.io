<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>  Añadir discos en caliente a guest Debian 5.0 sobre ESXi host
 | frommelmak</title>

    <meta name="author" content="Marcos Martinez"/>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/magnific-popup.min.css"/>
    <link rel="stylesheet" href="https://frommelmak.com/theme/css/jquery.mglass.css"/>
    <link rel="stylesheet" href="https://frommelmak.com/theme/css/pygment-solarized-dark.css"/>
    <link rel="stylesheet" href="https://frommelmak.com/theme/css/style.css"/>

    <!-- Fonts -->
    <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'/>
    <link href='https://fonts.googleapis.com/css?family=Istok+Web' rel='stylesheet' type='text/css'/>
    <link href='https://fonts.googleapis.com/css?family=Droid+Sans+Mono' rel='stylesheet' type='text/css'/>
      <link href='https://fonts.googleapis.com/css?family=Expletus+Sans' rel='stylesheet' type='text/css'>


    <link rel="icon" href="https://frommelmak.com/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="https://frommelmak.com/favicon.ico" type="image/x-icon">

    <!-- Feeds -->


  </head>

  <body>

    <div class="container">

      <div class="page-header">
          <a href="https://frommelmak.com" class="avatar-container pull-left">
            <div class="avatar  animate ">
              <div class="side"><img src="images/avatar.png" class="img-responsive"/></div>
                <div class="side back"><p class="text-center">Alien Life Form</p></div>
            </div>
          </a>
        <h1><a href="https://frommelmak.com">frommelmak</a> <small>Yet another Melmacian interested in technology...</small></h1>
      </div>

      <nav class="navbar navbar-default">

        <!-- Hamburger menu for mobile -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#plumage-navbar-collapse-1" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="https://frommelmak.com" title="Yet another Melmacian interested in technology...">frommelmak</a>
        </div>

        <!-- Menus and search forms -->
        <div class="collapse navbar-collapse" id="plumage-navbar-collapse-1">

          <ul class="nav navbar-nav">
<li >
                <a href="/">Home</a>
              </li>
<li >
                  <a href="https://frommelmak.com/pages/about.html">About</a>
                </li>
          </ul>

            <form class="navbar-form navbar-right" role="search" action="https://www.google.com" target="_blank">
              <div class="form-group">
                <div class="input-group">
                  <input type="text" name="q" class="form-control search-query" placeholder="Search" required />
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="button"><i class="fa fa-search fa-fw"></i></button>
                  </span>
                </div>
                <input type="hidden" name="cx" value="partner-pub-2082790787711438:7148578903" />
                <input type="hidden" name="ie" value="UTF-8" />
              </div>
            </form>


        </div>

      </nav>

    </div>


    <div class="container main">


      <div class="row">
        <div class=" col-md-9  ">
  <h1>
    <a href="https://frommelmak.com/anadir-discos-en-caliente-a-guest-debian-50-sobre-esxi-host.html" rel="bookmark" title="Permalink to Añadir discos en caliente a guest Debian 5.0 sobre ESXi host">Añadir discos en caliente a guest Debian 5.0 sobre ESXi&nbsp;host</a>
  </h1>
        </div>
      </div>

      <div class="row">


        <div class=" col-md-9 " id="content" role="main">
  

  <div>
    <p>En primer lugar añadimos un nuevo disco al guest desde el host mediante&nbsp;vSphere.</p>
<p>El disco aun no se ve en el&nbsp;guest:</p>
<div class="highlight"><pre><span></span><span class="gp">guest666@root:#</span> cat /proc/scsi/scsi 
<span class="go">Attached devices: </span>
<span class="go">Host: scsi0 Channel: 00 Id: 01 Lun: 00 </span>
<span class="go"> Vendor: VMware Model: Virtual disk Rev: 1.0 </span>
<span class="go"> Type: Direct-Access ANSI SCSI revision: 02</span>
</pre></div>


<p>Por lo que un <code>sfdisk -l</code> no lo lista&nbsp;tampoco:</p>
<div class="highlight"><pre><span></span><span class="gp">guest666@root:#</span> sfdisk -l

<span class="go">Disk /dev/sda: 1305 cylinders, 255 heads, 63 sectors/track</span>
<span class="go">Units = cylinders of 8225280 bytes, blocks of 1024 bytes, counting from 0</span>

<span class="go"> Device Boot Start End #cyls #blocks Id System</span>
<span class="go">/dev/sda1 * 0+ 1178 1179- 9470286 83 Linux </span>
<span class="go">/dev/sda2 1179 1304 126 1012095 5 Extended</span>
<span class="go">/dev/sda3 0 - 0 0 0 Empty </span>
<span class="go">/dev/sda4 0 - 0 0 0 Empty </span>
<span class="go">/dev/sda5 1179+ 1304 126- 1012063+ 82 Linux swap / Solaris</span>
</pre></div>


<p>Lo que hay que hacer es forzar un re-scan de los dispositivos scsi. Para esto lo normal sería reiniciar, sin embargo podemos utilizar <code>scsiadd</code> en su lugar (<code>apt-get install scsiadd</code> si no lo&nbsp;tenemos).</p>
<div class="highlight"><pre><span></span><span class="gp">guest666@root:~#</span> scsiadd -s
<span class="go">Attached devices:</span>
<span class="go">Host: scsi0 Channel: 00 Id: 01 Lun: 00</span>
<span class="go"> Vendor: VMware Model: Virtual disk Rev: 1.0</span>
<span class="go"> Type: Direct-Access ANSI SCSI revision: 02</span>
<span class="go">Host: scsi0 Channel: 00 Id: 00 Lun: 00</span>
<span class="go"> Vendor: VMware Model: Virtual disk Rev: 1.0</span>
<span class="go"> Type: Direct-Access ANSI SCSI revision: 02</span>
</pre></div>


<p>Tras esto, el disco ya aparece en <code>/proc/scsi/scsi</code> y mediante <code>sfdisk -l</code>. Ahora ya sólo queda particionar y&nbsp;formatear.</p>
<p><em><span class="caps">IMPORTANTE</span>!!!</em> Tras trastear con <code>scsiadd</code>, es recomendable prestar especial atención al pórximo reeboot del sistema. En mi caso, no encontraba el disco de arranque <strong>operative system not found</strong>. Al parecer, tras reiniciar el identificador <span class="caps">SCSI</span>, del último disco añadido era el 0 en lugar del 2. Para solventarlo, hay que cambiar los <span class="caps">ID</span> <span class="caps">SCSI</span> desde vmware y habilitar la opción de entrar en la <span class="caps">BIOS</span> para conseguir arrancar el&nbsp;sistema.</p>
  </div>

    <h3>Related content</h3>
    <!-- TODO: Use fancier related layout, as in https://kevin.deldycke.com/2012/04/beautify-contextual-related-posts-wordpress-plugin/ -->
    <ul>
        <li><a href="https://frommelmak.com/crear-discos-virtuales-de-mas-de-256gb-en-vmware-esxi.html">Crear discos virtuales de más de <span class="caps">256GB</span> en VMware&nbsp;ESXi</a></li>
        <li><a href="https://frommelmak.com/esxi-snapshots-en-otro-datastore.html">ESXi: Snapshots en otro&nbsp;datastore</a></li>
        <li><a href="https://frommelmak.com/udev-network-device-en-ubuntu-hardy-sobre-vmware.html">udev network device en Ubuntu Hardy sobre&nbsp;VMWare</a></li>
      </ul>

    <div class="comments">
      <div id="disqus_thread"></div>
      <script type="text/javascript">
        var disqus_shortname = 'frommelmak';
        var disqus_identifier = "anadir-discos-en-caliente-a-guest-debian-50-sobre-esxi-host.html";
        var disqus_title = "Añadir discos en caliente a guest Debian 5.0 sobre ESXi host";
        var disqus_url = "https://frommelmak.com/anadir-discos-en-caliente-a-guest-debian-50-sobre-esxi-host.html";
        (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus</a>.</noscript>
    </div>

        </div>

          <div class="col-md-3">
  <div class="well">

    <p><abbr title="2010-04-21T13:36:51+02:00"><i class="fa fa-calendar"></i> Wed 21 April 2010</abbr></p>

      <p><address>
        <i class="fa fa-user"></i> By
          <a href="https://frommelmak.com/author/frommelmak.html" rel="author">frommelmak</a>
      </address></p>

    <hr/>

      <p>
              <a href="https://frommelmak.com/category/spanish.html" rel="tag"
                  data-toggle="tooltip" class="label label-info"
                  title="56 articles in this category">Spanish</a>
            <a href="/tag/vmware.html" data-toggle="tooltip"
      class="label label-default"
      title="5 articles with this tag">vmware</a>
            <a href="/tag/esx.html" data-toggle="tooltip"
      class="label label-default"
      title="2 articles with this tag">esx</a>
      </p>
      <hr/>

      <p>Found a typo ? Want to fix it ?</p>
      <a class="btn btn-info btn-block" href="https://github.com/frommelmak/blog/edit/master/content/posts/anadir-discos-en-caliente-a-guest-debian-50-sobre-esxi-host.md"><i class="fa fa-random fa-white fa-fw"></i> Edit article on GitHub</a>
      <hr/>

      <nav>
        <ul class="pager">
          <li class="previous ">
            <a  href="https://frommelmak.com/udev-network-device-en-ubuntu-hardy-sobre-vmware.html" title="udev network device en Ubuntu Hardy sobre VMWare"  rel="prev">
              <span aria-hidden="true">←</span> Older
            </a>
          </li>
          <li class="next ">
            <a  href="https://frommelmak.com/backup-completo-de-un-guest-linux-mediante-tar.html" title="Backup completo de un guest Linux mediante tar"  rel="next">
              Newer <span aria-hidden="true">→</span>
            </a>
          </li>
        </ul>
      </nav>

  </div>
            
          </div>

      </div>

    </div>

    <!-- TODO: make footer sticky -->
    <footer class="container-fluid">
      <div class="container">
        <div class="row">

            <div class="col-md-2">
                <h5>Social</h5>
                <ul class="list-unstyled">
                  <li>  <a href="http://twitter.com/frommelmak">
      <i class="fa fa-twitter"></i>
    @frommelmak
  </a></li>
                </ul>
            </div>
            <div class="col-md-2">
                <h5>Links</h5>
                <ul class="list-unstyled">
                  <li>  <a href="http://linkedin.com/in/marcosmartinezjimenez">
      <i class="fa fa-linkedin-square"></i>
    LinkedIn
  </a></li>
                  <li>  <a href="http://github.com/frommelmak">
      <i class="fa fa-github"></i>
    GitHub
  </a></li>
                  <li>  <a href="http://www.youtube.com/user/melmak">
      <img src="https://besticon-demo.herokuapp.com/icon?url=www.youtube.com&size=16" width="16" height="16" class="icon" alt="www.youtube.com icon"/>
    Youtube
  </a></li>
                </ul>
            </div>

          <div class="col-md-2">
            <h5>Browse content by</h5>
            <ul class="list-unstyled">
                <li><a href="https://frommelmak.com/categories/index.html"><i class="fa fa-tags"></i> Categories</a></li>
                <li><a href="https://frommelmak.com/archives/index.html"><i class="fa fa-calendar"></i> Dates</a></li>
                <li><a href="https://frommelmak.com/tags/index.html"><i class="fa fa-tag"></i> Tags</a></li>
            </ul>
          </div>

          <div class="col-md-2 text-muted">
            <h5>Copyright notice</h5>
            <p>© Copyright 2005-2020 Marcos Martinez.</p>
          </div>

          <div class="col-md-2 text-muted">
            <h5>Disclaimer</h5>
              <p>All opinions expressed in this site are my own personal opinions and are not endorsed by, nor do they represent the opinions of my previous, current and future employers or any of its affiliates, partners or customers.</p>
          </div>

          <div class="col-md-2">
          </div>

        </div>
      </div>

      <h5 class="text-right"><a href="#"><i class="fa fa-arrow-up"></i> Back to top</a></h5>

      <div class="container">
        <div class="row col-md-12 text-muted text-center">
          Site generated by <a href="https://getpelican.com"> Pelican</a>.<br/>
          <a href="https://github.com/kdeldycke/plumage"> Plumage</a> theme by <a href="https://kevin.deldycke.com">Kevin Deldycke</a>.
        </div>
      </div>

    </footer>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/jquery.magnific-popup.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fitvids/1.1.0/jquery.fitvids.min.js"></script>
    <script src="https://frommelmak.com/theme/js/jquery.mglass.js"></script>
    <script src="https://frommelmak.com/theme/js/application.js"></script>

  </body>
</html>