<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8"/>

    <title>  Añadir discos en caliente a guest Debian 5.0 sobre ESXi host
 | frommelmak</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content=""/>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/css/bootstrap-responsive.min.css"/>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/magnific-popup.min.css"/>
    <link rel="stylesheet" href="https://frommelmak.com/theme/css/jquery.mglass.css"/>
    <link rel="stylesheet" href="https://frommelmak.com/theme/css/pygment-solarized-dark.css"/>
    <link rel="stylesheet" href="https://frommelmak.com/theme/css/style.css"/>

    <!-- Fonts -->
    <link href='//fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'/>
    <link href='//fonts.googleapis.com/css?family=Istok+Web' rel='stylesheet' type='text/css'/>
    <link href='//fonts.googleapis.com/css?family=Droid+Sans+Mono' rel='stylesheet' type='text/css'/>
      <link href='//fonts.googleapis.com/css?family=Expletus+Sans' rel='stylesheet' type='text/css'>


    <link rel="icon" href="https://frommelmak.com/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="https://frommelmak.com/favicon.ico" type="image/x-icon">

    <!-- Feeds -->
      <link href="https://frommelmak.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="frommelmak Full Atom Feed"/>
      <link href="https://frommelmak.com/feeds/spanish.atom.xml" type="application/atom+xml" rel="alternate" title="frommelmak Categories Atom Feed"/>


  </head>

  <body>
    <div class="container">

      <header>
        <div class="page-header">
            <a href="https://frommelmak.com" class="avatar-container">
              <div class="avatar  animate ">
                <div class="side"><img src="images/avatar.png"/></div>
                  <div class="side back"><p class="text-center">Alien Life Form</p></div>
              </div>
            </a>
          <h1><a href="https://frommelmak.com">frommelmak</a> <small>Yet another Melmacian interested in technology...</small></h1>
        </div>

        <div class="navbar">
          <div class="navbar-inner">
            <a class="brand" href="https://frommelmak.com" title="Yet another Melmacian interested in technology...">frommelmak</a>
            <ul class="nav">
<li ><a href="/">Home</a></li>
<li ><a href="http://wiki.frommelmak.com">Wiki</a></li>
<li ><a href="http://old.frommelmak.com">Old Blog</a></li>
                  <li ><a href="https://frommelmak.com/pages/about.html">About</a></li>
            </ul>
              <form class="navbar-search pull-right" action="https://www.google.com" target="_blank">
                <input type="text" name="q" class="search-query span2" placeholder="Search"/>
                <i class="fa fa-search fa-fw"></i>
                <input type="hidden" name="cx" value="partner-pub-2082790787711438:7148578903" />
                <input type="hidden" name="ie" value="UTF-8" />
              </form>
          </div>
        </div>
      </header>

      <section>

        <div class="row">
          <div class=" span9  ">
  <h1>
    <a href="https://frommelmak.com/anadir-discos-en-caliente-a-guest-debian-50-sobre-esxi-host.html" rel="bookmark" title="Permalink to Añadir discos en caliente a guest Debian 5.0 sobre ESXi host">Añadir discos en caliente a guest Debian 5.0 sobre ESXi&nbsp;host</a>
  </h1>
          </div>
        </div>

        <div class="row">


          <div class=" span9 " id="content" role="main">
  

  <div>
    <p>En primer lugar añadimos un nuevo disco al guest desde el host mediante&nbsp;vSphere.</p>
<p>El disco aun no se ve en el&nbsp;guest:</p>
<div class="codehilite"><pre><span class="gp">guest666@root:#</span> cat /proc/scsi/scsi 
<span class="go">Attached devices: </span>
<span class="go">Host: scsi0 Channel: 00 Id: 01 Lun: 00 </span>
<span class="go"> Vendor: VMware Model: Virtual disk Rev: 1.0 </span>
<span class="go"> Type: Direct-Access <span class="caps">ANSI</span> <span class="caps">SCSI</span> revision: 02</span>
</pre></div>


<p>Por lo que un <code>sfdisk -l</code> no lo lista&nbsp;tampoco:</p>
<div class="codehilite"><pre><span class="gp">guest666@root:#</span> sfdisk -l

<span class="go">Disk /dev/sda: 1305 cylinders, 255 heads, 63 sectors/track</span>
<span class="go">Units = cylinders of 8225280 bytes, blocks of 1024 bytes, counting from 0</span>

<span class="go"> Device Boot Start End #cyls #blocks Id System</span>
<span class="go">/dev/sda1 * 0+ 1178 1179- 9470286 83 Linux </span>
<span class="go">/dev/sda2 1179 1304 126 1012095 5 Extended</span>
<span class="go">/dev/sda3 0 - 0 0 0 Empty </span>
<span class="go">/dev/sda4 0 - 0 0 0 Empty </span>
<span class="go">/dev/sda5 1179+ 1304 126- 1012063+ 82 Linux swap / Solaris</span>
</pre></div>


<p>Lo que hay que hacer es forzar un re-scan de los dispositivos scsi. Para esto lo normal sería reiniciar, sin embargo podemos utilizar <code>scsiadd</code> en su lugar (<code>apt-get install scsiadd</code> si no lo&nbsp;tenemos).</p>
<div class="codehilite"><pre><span class="gp">guest666@root:~#</span> scsiadd -s
<span class="go">Attached devices:</span>
<span class="go">Host: scsi0 Channel: 00 Id: 01 Lun: 00</span>
<span class="go"> Vendor: VMware Model: Virtual disk Rev: 1.0</span>
<span class="go"> Type: Direct-Access <span class="caps">ANSI</span> <span class="caps">SCSI</span> revision: 02</span>
<span class="go">Host: scsi0 Channel: 00 Id: 00 Lun: 00</span>
<span class="go"> Vendor: VMware Model: Virtual disk Rev: 1.0</span>
<span class="go"> Type: Direct-Access <span class="caps">ANSI</span> <span class="caps">SCSI</span> revision: 02</span>
</pre></div>


<p>Tras esto, el disco ya aparece en <code>/proc/scsi/scsi</code> y mediante <code>sfdisk -l</code>. Ahora ya sólo queda particionar y&nbsp;formatear.</p>
<p><em><span class="caps">IMPORTANTE</span>!!!</em> Tras trastear con <code>scsiadd</code>, es recomendable prestar especial atención al pórximo reeboot del sistema. En mi caso, no encontraba el disco de arranque <strong>operative system not found</strong>. Al parecer, tras reiniciar el identificador <span class="caps">SCSI</span>, del último disco añadido era el 0 en lugar del 2. Para solventarlo, hay que cambiar los <span class="caps">ID</span> <span class="caps">SCSI</span> desde vmware y habilitar la opción de entrar en la <span class="caps">BIOS</span> para conseguir arrancar el&nbsp;sistema.</p>
  </div>

    <h3>Related content</h3>
    <!-- TODO: Use fancier related layout, as in http://kevin.deldycke.com/2012/04/beautify-contextual-related-posts-wordpress-plugin/ -->
    <ul>
        <li><a href="https://frommelmak.com/crear-discos-virtuales-de-mas-de-256gb-en-vmware-esxi.html">Crear discos virtuales de más de <span class="caps">256GB</span> en VMware&nbsp;ESXi</a></li>
        <li><a href="https://frommelmak.com/esxi-snapshots-en-otro-datastore.html">ESXi: Snapshots en otro&nbsp;datastore</a></li>
        <li><a href="https://frommelmak.com/de-vmware-server-a-esxi-con-vmware-converter.html">De VMware Server a ESXi con VMware&nbsp;Converter</a></li>
      </ul>

    <div class="comments">
      <div id="disqus_thread"></div>
      <script type="text/javascript">
        var disqus_shortname = 'frommelmak';
        var disqus_identifier = "anadir-discos-en-caliente-a-guest-debian-50-sobre-esxi-host.html";
        var disqus_title = "Añadir discos en caliente a guest Debian 5.0 sobre ESXi host";
        var disqus_url = "https://frommelmak.com/anadir-discos-en-caliente-a-guest-debian-50-sobre-esxi-host.html";
        (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus</a>.</noscript>
    </div>

          </div>

            <div class="span3">
  <div class="well">

    <p><abbr class="fa fa-calendar" title="2010-04-21T13:36:51"> Wed 21 April 2010</abbr></p>

      <p><address class="fa fa-user"> By <a href="https://frommelmak.com/author/frommelmak.html" rel="author">frommelmak</a></address></p>

    <hr/>

      <p>
              <a href="https://frommelmak.com/category/spanish.html" rel="tag tooltip" class="label label-info" data-placement="right" data-original-title="56 articles in this category">Spanish</a>
            <a href="/tag/vmware.html" rel="tooltip" class="label" data-placement="right" data-original-title="5 articles with this tag">vmware</a>
            <a href="/tag/esx.html" rel="tooltip" class="label" data-placement="right" data-original-title="2 articles with this tag">esx</a>
      </p>
      <hr/>

      <p>Found a typo ? Want to fix it ?</p>
      <a class="btn btn-info btn-block" href="https://github.com/frommelmak/blog/edit/master/content/posts/anadir-discos-en-caliente-a-guest-debian-50-sobre-esxi-host.md"><i class="fa fa-random fa-white fa-fw"></i> Edit article on GitHub</a>
      <hr/>

      <ul class="pager">
        <li class="previous "><a  href="https://frommelmak.com/udev-network-device-en-ubuntu-hardy-sobre-vmware.html" title="udev network device en Ubuntu Hardy sobre VMWare"  rel="prev">← Older</a></li>
        <li class="next "><a  href="https://frommelmak.com/backup-completo-de-un-guest-linux-mediante-tar.html" title="Backup completo de un guest Linux mediante tar"  rel="next">Newer →</a></li>
      </ul>

  </div>
              
            </div>

        </div>
      </section>

    </div>

    <!-- TODO: make footer sticky -->
    <footer class="container-fluid">
      <div class="container">
        <div class="row">

            <div class="span2">
                <h5>Social</h5>
                <ul class="unstyled">
                  <li>  <a href="http://twitter.com/frommelmak">
      <i class="fa fa-twitter"></i>
    @frommelmak
  </a></li>
                </ul>
            </div>
            <div class="span2">
                <h5>Links</h5>
                <ul class="unstyled">
                  <li>  <a href="http://linkedin.com/in/marcosmartinezjimenez">
      <i class="fa fa-linkedin-square"></i>
    LinkedIn
  </a></li>
                  <li>  <a href="http://github.com/frommelmak">
      <i class="fa fa-github"></i>
    GitHub
  </a></li>
                  <li>  <a href="http://www.youtube.com/user/melmak">
      <img src="https://icons.better-idea.org/icon?url=www.youtube.com&size=16" width="16" height="16" class="icon" alt="www.youtube.com icon"/>
    Youtube
  </a></li>
                </ul>
            </div>

          <div class="span2">
            <h5>Browse content by</h5>
            <ul class="fa-ul">
                <li><a href="https://frommelmak.com/categories/index.html"><i class="fa-li fa fa-tags"></i> Categories</a></li>
                <li><a href="https://frommelmak.com/archives/index.html"><i class="fa-li fa fa-calendar"></i> Dates</a></li>
                <li><a href="https://frommelmak.com/tags/index.html"><i class="fa-li fa fa-tag"></i> Tags</a></li>

                <li><a href="https://frommelmak.com/feeds/spanish.atom.xml"><i class="fa-li fa fa-rss"></i> Feed</a></li>
            </ul>
          </div>

          <div class="span2 muted">
            <h5>Copyright notice</h5>
            <p>© Copyright 2005-2015 Marcos Martínez.</p>
          </div>

          <div class="span2 muted">
            <h5>Disclaimer</h5>
              <p>All opinions expressed in this site are my own personal opinions and are not endorsed by, nor do they represent the opinions of my previous, current and future employers or any of its affiliates, partners or customers.</p>
          </div>

          <div class="span2">
            <h5 class="pull-right"><a href="#" class="fa fa-arrow-up"> Back to top</a></h5>
          </div>

        </div>
      </div>

      <div class="container">
        <div class="row span12 muted text-center">
          Site generated by <a href="http://getpelican.com"> Pelican</a>.<br/>
          <a href="https://github.com/kdeldycke/plumage"> Plumage</a> theme by <a href="http://kevin.deldycke.com">Kevin Deldycke</a>.
        </div>
      </div>

    </footer>


    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/jquery.magnific-popup.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fitvids/1.1.0/jquery.fitvids.min.js"></script>
    <script src="https://frommelmak.com/theme/js/jquery.mglass.js"></script>
    <script src="https://frommelmak.com/theme/js/application.js"></script>

  </body>
</html>